# 09-1 운영체제를 알아야 하는 이유

- 지금까지는 컴퓨터 구조를 학습했다면, 컴퓨터 구조에서 학습한 부품들을 관리하는 특별한 프로그램인 운영체제를 학습해보자.
- 대표적인 운영체제로는 윈도우, macOS, 리눅스, 안드로이드, iOS

---

## 운영체제란

- 프로그램 실행에 마땅이 필요한 요소를 시스템 자원, 혹은 자원이라고 한다.
- CPU, 메모리, 보조기억장치, 입출력장치 같은 컴퓨터 부품들은 모두 자원이다.
- 여기서 실행할 프로그램에 필요한 자원을 할당하고, 프로그램이 올바르게 실행되도록 돕는 특별한 프로그램이 바로 `운영체제`이다.
- `커널 영역` : 항상 컴퓨터가 부팅될 때 메모리 내 따로 적재되어 실행되는 공간. 운영체제도 커널 영역에 적재된다.
- `사용자 영역` : 커널 영역을 제외한 나머지 영역, 사용자가 이용하는 응용 프로그램이 적재되는 영역
    - 응용 프로그램은 사용자가 특정 목적을 위해 사용하는 일반적이 프로그램이다. 워드 프로세서, 인터넷 브라우저, 메모장, 게임 등

!https://i.imgur.com/CReNC0k.png

- 즉, 운영체제는 커널 영역에 적재되어 사용자 영역에 적제된 프로그램들에 자원을 할당하고 이들이 올바르게 실행되도록 돕는다.

### 운영 체제의 역할

- 메모리 관리
    - 운영체제는 실행할 응용 프로그램을 메모리에 적재하고, 더이상 실행되지 않는 프로그램을 메모리에서 삭제하며 지속적으로 메모리 자원을 관리한다.

  !https://i.imgur.com/04JEy84.png

- CPU 관리
    - 여러 응용 프로그램들이 실행되려면 CPU가 필요하고 여러 프로그램이 동시에 CPU를 사용하려고 할 때 어떤 프로그램이 CPU를 사용할지 결정하는 것이 운영체제의 역할이다. 최대한 공정하게 여러 프로그램에 CPU 자원을 할당한다.

  !https://i.imgur.com/8COjno3.png

- 입출력 장치 관리
    - 여러 응용 프로그램이 하나의 입출력 장치를 공유해야 할 때 충돌을 방지하기 위해 자원을 관리한다.

  !https://i.imgur.com/GNfXRb4.png

- 이처럼 운영체제는 응용 프로그램과 하드웨어 사이에서 응용 프로그램에 필요한 자원을 할당하고, 응용 프로그램이 올바르게 실행되도록 관리하는 역할을 맡는다.

## 운영체제를 알아야 하는 이유

- 운영체제가 하드웨어를 조작하고 관리하는 기능들을 제공하기 때문에 개발자는 하드웨어를 조작하는 코드를 직접 작성할 필요없이 운영체제의 도움을 받아 간편하게 개발할 수 있다.
- 운영체제는 현재 하드웨어의 상태는 어떤지, 우리의 코드가 어떻게 실행되었는지, 하드웨어 상에 어떤 문제가 있었는지 등을 상세히 알려줄 수 있고, 이를 통해 문제 해결의 실마리를 찾을 수 있다. 결과적으로 하드웨어와 프로그램을 더 깊이 이해할 수 있다.
- 대표적인 운영체제와의 대화 예시는 오류 메시지이다. 오류가 발생했을 때 운영체제는 오류 메시지를 통해 문제의 원인을 알려준다.

# 09-2 운영체제의 큰 그림

- 운영체제는 사용자가 실행하는 응용 프로그램이 올바르게 실행되도록 돕고 필요한 자원을 할당해주는 프로그램이다.
- 커널이란 무엇인지 이해하고, 응용 프로그램이 운영체제로부터 어떻게 도움을 받으며 실행되는지 이해하기 위해 이중 모드와 시스템 호출이라는 개념을 학습해보자.
- 운영체제가 응용 프로그램에 어떤 서비스를 제공하는지 알아보자.

---

## 운영체제의 심장, 커널

- 운영체제의 핵심 서비스를 담당하는 부분으로, 마치 사람의 심장과 같다. 자원에 접근하고 조작하며 프로그램이 안전하게 실행되도록 하는 핵심 기능을 제공한다.
- 운영체제가 제공하는 서비스 중 커널에 포함되지 않는 서비스도 있는데, 대표적으로 `사용자 인터페이스`가 있다.
    - 윈도우 바탕화면처럼 사용자가 컴퓨터와 상호작용할 수 있는 통로일 뿐 커널에 속한 기능은 아니다.
    - 종류에는 그래픽 유저 인터페이스(GUI)와 커맨드 라인 인터페이스(CLI)가 있다.

## 이중모드와 시스템 호출

- 운영체제는 사용자가 실행하는 응용 프로그램이 하드웨어 자원에 직접 접근하는 것을 방지하여 자원을 보호한다. 응용 프로그램이 CPU, 메모리, 하드 디스크에 마음대로 접근하고 조작하는 것을 막는 문지기 역할을 하는 셈이다. 이러한 운영체제의 문지기 역할은 이중 모드로써 구현된다.

### 이중 모드

CPU가 명령어를 실행하는 모드를 크게 `사용자 모드`와 `커널 모드`로 구분하는 방식이다.

- 사용자 모드
    - 운영체제 서비스를 제공받을 수 없는 실행 모드, 즉 커널 영역의 코드를 실행할 수 없는 모드이다.
    - 일반적인 응용 프로그램은 사용자 모드로 실행된다.
    - 사용자 모드로 실행 중인 CPU는 입출력 명령어와 같이 하드웨어 자원에 접근하는 명령어를 실행할 수 없다. 그래서 사용자 모드로 실행되는 일반적인 응용 프로그램은 자원에 접근할 수 없다.
- 커널 모드
    - 운영체제 서비스를 제공받을 수 있는 실행 모드이다.
    - CPU가 커널 모드로 명령어를 실행하면 자원에 접근하는 명령어를 비롯한 모든 명령어를 실행할 수 있다.

!https://i.imgur.com/2FBWJ4f.png

### 시스템 호출

- 사용자 모드로 실행되는 프로그램이 커널 모드로 전환되어야 할 때 운영체제에 요청하는 것을 뜻한다.
- 시스템 호출의 작동 예
    1. 응용 프로그램은 하드 디스크에 데이터를 저장하는 시스템 호출을 발생시켜 커널 모드로 전환
    2. 운영체제 내의 ‘하드 디스크에 데이터를 저장하는 코드’를 실행함으로써 하드 디스크에 접근 가능
    3. 하드 디스크에 접근이 끝났다면 다시 사용자 모드로 복귀하여 실행을 계속 한다.

  !https://i.imgur.com/CRzhYIB.png

- 일반적으로 응용 프로그램은 실행 과정에서 운영체제 서비스들을 매우 빈번하게 이용하고, 그 과정에서 빈번하게 시스템 호출을 발생시킨다.

## 운영체제의 핵심 서비스

### 프로세스 관리

- 프로세스 : 실행 중인 프로그램
- 일반적으로 하나의 CPU는 한 번에 하나의 프로세스만 실행할 수 있기에 CPU는 이 프로세스들을 조금씩 번갈아 가며 실행한다.
- 각 프로세스는 상태와 사용하고자 하는 자원이 다양하기 때문에 운영체제는 다양한 프로세스를 일목요연하게 관리하고 실행할 수 있어야 한다.

### 자원 접근 및 할당

- CPU 스케줄링 : 여러 프로세스 중에서 어떤 프로세스에 CPU를 할당할지 결정하는 것
- 메모리 관리 : 새로운 프로세스가 적재될 때 어느 주소에 적재해야 할지 결정하는 것
- 입출력장치 관리 : 프로세스가 입출력을 요청할 때 효율적으로 처리하기 위해 인터럽트 서비스 루틴을 실행하여 입출력 작업을 수행하는 것

### 파일 시스템 관리

- 컴퓨터를 사용할 때 여러 파일을 열고, 생성하고, 삭제하는 파일 시스템도 운영체제가 지원하는 핵심 서비스이다.